name = "sma-data-server"
main = "src/index.ts"

compatibility_date = "2025-01-09"

# D1 Database bindings
[[d1_databases]]
binding = "DB"
database_name = "solar_meter_values"
database_id = "a9ea65ef-bfba-42af-baa8-ea60520d4d1f"

# Routes
[[routes]]
pattern = "sma-data-server.everyday-apps.org/*"
zone_id = "562991781207dfc9e64451bec4e2f17b"

# Secrets (managed via: wrangler secret put <SECRET_NAME>)
# - API_SECRET: API key for authenticating requests to /new_entries endpoint

[observability]
enabled = false
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = false
persist = true
head_sampling_rate = 1